# Client Viewer（选片端）Figma-like UI 方案（线框图）

## DESIGN SPECIFICATION

1. **Purpose Statement**：客户在 PC/平板上通过“受控链接（token）”浏览约 500 张带水印预览图，快速完成“喜欢/入册/精修”三类标注，并在套餐约束下提交结果。界面需要像 Figma 一样高信息密度、强快捷键与清晰状态反馈，同时保证访问受控（到期/撤销）与不暴露原图。
2. **Aesthetic Direction**：Industrial/utilitarian
3. **Color Palette**：
   - Ink Black `#0B0F14`（主背景/沉浸）
   - Slate `#151C25`（面板底/分割区）
   - Graphite `#2A3442`（描边/分隔线）
   - Paper `#E9EEF5`（主文字/高对比）
   - Signal Amber `#FFB020`（计数/超额/关键提示）
4. **Typography**：
   - UI：`IBM Plex Sans`
   - 数字/快捷键提示：`IBM Plex Mono`
5. **Layout Strategy**：“工具面板 + 画布”非对称三栏结构，中央画布尽量占宽；右侧属性面板采用分段折叠与悬浮计数胶囊（不居中卡片），底部加入可收起的“缩略图胶片条”作为时间轴式导航。

---

## 已确认的产品约束（本方案默认）

- **设备**：主要 PC（键盘鼠标），兼容平板。
- **规模**：单项目约 500 张，必须支持虚拟列表（预留后续扩展到更大规模）。
- **标注**：仅 “喜欢/入册/精修” 三类（星级/颜色标签/评论/圈选区域先搁置）。
- **对比**：暂时仅两张并排（多张 2/3/4、同步缩放/同步平移先搁置）。
- **交付约束**：强制水印预览、禁止原图下载、token 支持到期与撤销。
- **操作闭环**：**允许撤回回到草稿并再次提交**（可多次提交，受业务规则约束）。

---

## 方案 A：画布 + 资产面板（更像 Figma）

> 说明：部分 Markdown 渲染器对中文字符“等宽”支持不一致，下面线框图改用 ASCII 英文标签确保对齐；含义见图后中文对照。

```
+----------------------------------------------------------------------------------+
| TOPBAR: Project/TTL | Search | View: Grid v Single v Compare v | Counters L/B/R |
| Status: Draft/Submitted | [Submit] [Revert->Draft] | Help (?) | Shortcuts        |
+----------------------+------------------------------------------+-----------------+
| LEFT PANEL           | CANVAS / MAIN                            | RIGHT PANEL     |
| - Albums             | - Grid: virtual masonry                  | - Photo info     |
| - Filters: untagged  | - Single: zoom/pan + watermark           | - Tag toggles    |
|            L/B/R     | - Compare: 2-up (sync zoom/pan deferred) | - Package/overage|
| - Sort: time/sim(de) |                                          | - Token state     |
+----------------------+------------------------------------------+-----------------+
| FILMSTRIP (collapsible, virtual horiz list) | Prev | Next | Shortcut hints      |
+----------------------------------------------------------------------------------+
```

### 中文对照（A）

- `TOPBAR`：顶栏（项目名/有效期、搜索、视图切换、计数胶囊、提交/撤回、快捷键入口）
- `LEFT PANEL`：资产面板（相册/分组、筛选、排序；全部需要支持虚拟列表与快速定位）
- `CANVAS / MAIN`：画布主区（网格/单张/对比三种模式，统一强水印预览）
- `RIGHT PANEL`：属性面板（当前照片信息、喜欢/入册/精修三态、套餐规则/超额提示、token 到期/撤销提示）
- `FILMSTRIP`：底部胶片条（可收起、虚拟横向列表、上一张/下一张与快捷键提示）

### 适用场景

- 需要更强的“工作台感”：筛选/批量浏览/属性面板的信息密度更高。
- 未来要扩展更多“类 Figma”的能力时（例如评论、标签、标注区域）迁移成本更低。

---

## 方案 B：三段式（缩略图为主的选片工作流）

> 说明：同上，为保证对齐，线框图使用 ASCII 英文标签；含义见图后中文对照。

```
+----------------------------------------------------------------------------------+
| TOPBAR: Project | Token (TTL/Revoked) | Counters L/B/R | [Submit] [Revert->Draft]|
+--------------------------------------+-------------------------------------------+
| THUMBNAILS (virtual list)            | PREVIEW                                    |
| - Albums (tabs/tree)                 | +---------------------------------------+  |
| - Filters (chips)                    | | Large preview (watermark enforced)    |  |
| - Badges per thumb: L/B/R            | +---------------------------------------+  |
| - Keyboard/scroll navigation          | Compare rail (2-up) / Recent actions (de)|
+--------------------------------------+-------------------------------------------+
| STATUSBAR: net/loading | Index 123/500 | Keys: 1 Like, 2 Book, 3 Retouch, Space    |
+----------------------------------------------------------------------------------+
```

### 中文对照（B）

- `TOPBAR`：顶栏（项目/Token 状态、计数、提交/撤回）
- `THUMBNAILS`：左侧缩略图瀑布流（虚拟列表；分组/筛选；缩略图角标显示喜欢/入册/精修）
- `PREVIEW`：右侧主预览（大图强水印；下方对比栏两张并排；其它增强项可后置）
- `STATUSBAR`：状态栏（网络/加载、当前索引、快捷键提示）

### 适用场景

- 更贴近“快速选片”：缩略图优先，学习成本更低，标注效率高。
- 对属性面板信息密度要求较低，重点在浏览与标注闭环。

---

## 两方案共用的交互关键点（建议）

- **虚拟列表**：左侧瀑布流/底部胶片条都按虚拟化实现，避免 500 张以上卡顿。
- **快捷键**：
  - `1` 喜欢、`2` 入册、`3` 精修
  - `←/→` 上一张/下一张（或 `J/K` 备选）
  - `Esc` 退出对比/退出沉浸
- **提交/撤回**：
  - 提交后进入“已提交”态，但仍允许点击“撤回→草稿”，撤回后可继续修改并再次提交。
  - token 过期/撤销时：统一进入不可操作态（仅提示/引导联系摄影师），避免误导用户可以继续标注。
